// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id String @id @default(uuid())
  username String?
  email String? @unique
  password String?
  image String?
  phone_number String?
  socketId String?
  active Boolean? @default(false)
  admin Boolean? @default(false)
  messages Message[]
  conversations Conversation[]
  // purchases Purchase[]
  // cart ShoppingCart?
  createdAt DateTime @default(now())
}

model Message {
  id String @id @default(uuid())
  content String // text, image, file
  content_type String
  sender User @relation(fields: [sender_id], references: [id])
  sender_id String
  conversation Conversation @relation(fields: [conversation_id], references: [id])
  conversation_id String
  createdAt DateTime @default(now())
}

model Conversation {
  id String @id @default(uuid())
  members User[]
  messages Message[]
  // purchases Purchase[]
  createdAt DateTime @default(now())
}

model Purchase {
  id String @id @default(uuid())
  purchaseType String @default("PLATE")
  vin String
  color String
  email String
  state String
  name String
  lastName String
  address String
  city String
  houseType String
  vehicleType String
  zip String
  phone String
  driverLicense String
  vehicleInsurance String?
  details String
  paypalPaymentId String?
  hasFee Boolean @default(false)
  isInsurance Boolean @default(false)
  total Float
  optionSelectedPlate String
  optionSelectedInsurance String @default("NONE")
  insurancePrice Float?
  insuranceProvider String?
  image String
  createdAt DateTime @default(now())
}

model PlateDetailsCodes {
  id String @id @default(uuid())
  tagName String?
  status String?
  tagIssueDate String?
  tagExpirationDate String?
  purchasedOrLeased String?
  customerType String?
  transferPlate String?
  vin String?
  vehicleYear String?
  vehicleMake String?
  vehicleModel String?
  vehicleBodyStyle String?
  vehicleColor String?
  vehicleGVW String?
  dealerLicenseNumber String?
  dealerName String?
  dealerAddress String?
  dealerPhone String?
  dealerType String?
  createdAt DateTime @default(now())
  hasBarcode Boolean?
  hasQRCode Boolean?
  State String?
  tagType String?
  isInsurance Boolean?
  insuranceProvider String?
  agentName String?
  policyNumber String?
}
